import Head from 'next/head'
import styled from 'styled-components'
import CMP01 from '@/components/sideMenu/CMP01'
import CMP017 from '@/components/header/CMP017'
import { useSelector } from 'react-redux'
import CMP026 from '../common/CMP026'
import { useState } from 'react'
import CMP00 from '../modalContents/CMP00'
import { setWelcomeModal } from '@/store/slices/configSlide'
import { useDispatch } from 'react-redux'
import ImagePortada from '@/assets/img/PortadaAfiliacion_medismart.png'
import ImagePortada2 from '@/assets/img/PortadaAfiliacion_medismart2.png'
//bg background index
//gd gradient state
const Layout = ({ children, title, bg, gd = 0 }) => {
	const { welcomeModal } = useSelector((state) => state.config)
	const [showModal, setShowModal] = useState(true)
	const bgSelector = [
		{
			background: `url(${ImagePortada.src})`,
			backgroundSize: 'cover',
			backgroundPosition: 'center',
			backgroundRepeat: 'no-repeat',
		},
		{
			background: `url(${ImagePortada2.src})`,
			backgroundPosition: 'right top',
			backgroundRepeat: 'no-repeat',
		},
	]
	console.log(bg, bgSelector[bg])
	const funcOnClose = () => {
		const dispatch = useDispatch()
		dispatch(setWelcomeModal(false))
	}
	return (
		<>
			<Head>
				<title>{title}</title>
				<meta name="description" content="Generated by create next app" />
				<meta name="viewport" content="width=device-width, initial-scale=1" />
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<MainLayout bgSelector={bgSelector} bg={bg} gd={gd}>
				<header>
					<CMP017 />
				</header>
				<section>
					<aside>
						<CMP01 />
					</aside>
					<article>{children}</article>
				</section>
				{welcomeModal && showModal && (
					<CMP026
						title="¡Hola, que bueno verte por acá!"
						showModal={showModal}
						setModal={setShowModal}
						funcOnClose={funcOnClose}
					>
						<CMP00></CMP00>
					</CMP026>
				)}
				<footer>® Derechos reservados - Medismart 2023</footer>
			</MainLayout>
		</>
	)
}
export default Layout

const MainLayout = styled.main`
  box-sizing: border-box;
  display: grid;
  grid-template-rows: calc(48px + 80px) 1fr 80px;
  grid-template-columns: 1fr minmax(330px, 1440px) 1fr;
  grid-template-areas:
    "header header header"
    "content content content"
    "footer footer footer";
  min-height: 100vh;
  min-width: 100%;
  padding: 48px 56px 0 56px;
  header {
    grid-area: header;
    /* background-color: #f47676; */
  }
  section {
    display: grid;
    grid-template-columns: 314px 1fr;
    grid-column: 2/3;
    grid-template-areas: "menu article";
    box-shadow: 0px 4px 4px rgba(192, 200, 214, 0.25);
    background-color: var(--neutral-background-neutral-olive-100);
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    place-content: center;
    &:after {
      content: "";
      position: absolute;
      ${(props) => props.bgSelector[props.bg]}
      height: 388px;
      width: 1328px;
      top: 0px;
      border-radius: 10px;
      top: 0;
      right: 0;
      z-index: 1;
      pointer-events: none;
    }
    &:before {
      content: "";
      display: ${(props) => (props.gd === 1 ? 'block' : 'none')};
      position: absolute;
      background: rgb(40, 65, 109);
      background: linear-gradient(
        180deg,
        rgba(40, 65, 109, 0.28) 0%,
        rgba(40, 65, 109, 0.28) 12%,
        rgba(255, 255, 255, 0.8) 33%,
        rgba(255, 255, 255, 02) 45%,
        #fff 100%
      );
      width: 100%;
      top: 0;
      right: 0;
      z-index: 1;
      border-radius: 10px;
      pointer-events: none;
    }
  }
  article {
    grid-area: article;
    /* background-color: #051aff; */
  }
  aside {
    grid-area: menu;
  }
  footer {
    grid-area: footer;
    background-color: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    //styleName: Body/Body Small - Montserrat Medium;
    font-family: Montserrat;
    font-size: 14px;
    font-weight: 500;
    line-height: 17px;
    letter-spacing: 0px;
    text-align: center;
  }
`
